{"ast":null,"code":"// AdminDashboard.js\nimport React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import DeleteUser from'./DeleteUser';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{const[usersData,setUsersData]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Define the fetchUsersData function outside useEffect\nconst fetchUsersData=async()=>{try{const response=await fetch('/admin/users-with-accounts');if(response.ok){const data=await response.json();if(Array.isArray(data)){setUsersData(data);}else if(data.users){setUsersData(data.users);}else{setError('Invalid data format received.');}}else{setError('Failed to fetch users data.');}}catch(error){setError('Error fetching users data.');}finally{setLoading(false);}};useEffect(()=>{// Call fetchUsersData inside useEffect\nfetchUsersData();},[]);if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Clients:\"}),Array.isArray(usersData)&&usersData.length>0?usersData.map(user=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Username: \",user.username]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Name: \",\"\".concat(user.first_name||'N/A',\" \").concat(user.last_name||'N/A')]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Email: \",user.email||'N/A']}),/*#__PURE__*/_jsx(DeleteUser,{userId:user.id,onDeleteSuccess:fetchUsersData}),user.accounts&&user.accounts.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"User Accounts\"}),user.accounts.map(account=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Account Name: \",account.account_name]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Balance: $\",account.balance]})]},account.id))]}),/*#__PURE__*/_jsx(\"hr\",{})]},user.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No users data available.\"})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useEffect","useState","Link","DeleteUser","jsx","_jsx","jsxs","_jsxs","AdminDashboard","usersData","setUsersData","loading","setLoading","error","setError","fetchUsersData","response","fetch","ok","data","json","Array","isArray","users","children","style","color","length","map","user","username","concat","first_name","last_name","email","userId","id","onDeleteSuccess","accounts","account","account_name","balance"],"sources":["/home/max/personal-projects/vaulted_wealth_frontend/src/components/AdminDashboard.js"],"sourcesContent":["// AdminDashboard.js\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport DeleteUser from './DeleteUser';\n\nconst AdminDashboard = () => {\n  const [usersData, setUsersData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Define the fetchUsersData function outside useEffect\n  const fetchUsersData = async () => {\n    try {\n      const response = await fetch('/admin/users-with-accounts');\n\n      if (response.ok) {\n        const data = await response.json();\n\n        if (Array.isArray(data)) {\n          setUsersData(data);\n        } else if (data.users) {\n          setUsersData(data.users);\n        } else {\n          setError('Invalid data format received.');\n        }\n      } else {\n        setError('Failed to fetch users data.');\n      }\n    } catch (error) {\n      setError('Error fetching users data.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    // Call fetchUsersData inside useEffect\n    fetchUsersData();\n  }, []);\n\n  if (loading) {\n    return <p>Loading...</p>;\n  }\n\n  if (error) {\n    return <p style={{ color: 'red' }}>{error}</p>;\n  }\n\n  return (\n    <div>\n      <h1>Admin Dashboard</h1>\n      <h2>Clients:</h2>\n      {Array.isArray(usersData) && usersData.length > 0 ? (\n        usersData.map((user) => (\n          <div key={user.id}>\n            <h2>Username: {user.username}</h2>\n            <h2>Name: {`${user.first_name || 'N/A'} ${user.last_name || 'N/A'}`}</h2>\n            <h2>Email: {user.email || 'N/A'}</h2>\n\n            <DeleteUser userId={user.id} onDeleteSuccess={fetchUsersData} />\n\n            {user.accounts && user.accounts.length > 0 && (\n              <div>\n                <h3>User Accounts</h3>\n                {user.accounts.map((account) => (\n                  <div key={account.id}>\n                    <h2>Account Name: {account.account_name}</h2>\n                    <h2>Balance: ${account.balance}</h2>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            \n            <hr />\n          </div>\n        ))\n      ) : (\n        <p>No users data available.</p>\n      )}\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}